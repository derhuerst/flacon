// github.com/derhuerst/flacon
"use strict";function Flacon(){var r={},e={},t=function(n,o){var i,a,s;if("string"!=typeof n)throw new Error("`id` must be a string.");if((Array.isArray(o)||"object"!=typeof o)&&(o={}),!r[n])throw new Error(n+" has not been registered.");if(i=r[n],s=Object.keys(o).length>0,i.cache===e||o[n]){if(a=i.deps.map(function(r){var e=t(r,o);return o.hasOwnProperty(r)?o[r](e):e}),s)return i.factory.apply({},a);i.cache=i.factory.apply({},a)}return i.cache};return t.flush=function(t){if("string"!=typeof t)throw new Error("`id` must be a string.");if(!r[t])throw new Error(t+" has not been registered.");return r[t].cache=e,this},t.publish=function(t,n,o){if("string"!=typeof t)throw new Error("`id` must be a string.");if(2===arguments.length&&(o=n,n=[]),"function"!=typeof o)throw new Error("`factory` must be a function.");if(r[t])throw new Error(t+" has already been registered.");return r[t]={deps:n,factory:o,cache:e},o},t}module&&(module.exports=Flacon);