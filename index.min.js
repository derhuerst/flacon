// github.com/derhuerst/flacon
"use strict";var Flacon=function(){var r={},e={},t=function(n,o){var a,i;if("string"!=typeof n)throw new Error("`id` must be a string.");if((Array.isArray(o)||"object"!=typeof o)&&(o={}),!r[n])throw new Error(n+" has not been registered.");a=r[n];var s=Object.keys(o).length>0;if(a.cache===e||s){if(i=a.deps.map(function(r){var e=t(r);return o.hasOwnProperty(r)?o[r](e):e}),s)return a.factory.apply({},i);a.cache=a.factory.apply({},i)}return a.cache},n=function(t){if("string"!=typeof t)throw new Error("`id` must be a string.");if(!r[t])throw new Error(t+" has not been registered.");return r[t].cache=e,this},o=function(t,n,o){if("string"!=typeof t)throw new Error("`id` must be a string.");if(2===arguments.length&&(o=n,n=[]),"function"!=typeof o)throw new Error("`factory` must be a function.");if(r[t])throw new Error(t+" has already been registered.");return r[t]={deps:n,factory:o,cache:e},o};return t.flush=n,t.publish=o,t};module&&(module.exports=Flacon);